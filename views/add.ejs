<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Employee - Employee Payroll System</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="header">
    <div class="logo">
      <span class="logo-icon">ðŸ‘¤</span>
      <div class="logo-text">
        <span class="logo-title">EMPLOYEE</span>
        <span class="logo-subtitle">PAYROLL</span>
      </div>
    </div>
  </div>

  <div class="form-container">
    <h2 class="form-title">Employee Payroll Form</h2>
    
    <% if (errors && errors.length > 0) { %>
      <div class="error-messages">
        <% errors.forEach(error => { %>
          <p class="error"><%= error %></p>
        <% }); %>
      </div>
    <% } %>
    
    <form action="/add" method="POST" enctype="multipart/form-data" class="employee-form">
      <div class="form-group">
        <label for="name">Name</label>
        <input 
          type="text" 
          id="name" 
          name="name" 
          value="<%= employee.name || '' %>"
          required
        >
      </div>
      
      <div class="form-group">
        <label>Profile image</label>
        <div style="flex: 1;">
          <input 
            type="file" 
            id="profileImage" 
            name="profileImage" 
            accept="image/*"
            style="display: block; margin-bottom: 10px;"
          >
          <div class="profile-images">
            <img src="https://i.pravatar.cc/50?img=1" alt="Avatar 1" class="profile-img-option" data-avatar="1">
            <img src="https://i.pravatar.cc/50?img=2" alt="Avatar 2" class="profile-img-option" data-avatar="2">
            <img src="https://i.pravatar.cc/50?img=3" alt="Avatar 3" class="profile-img-option" data-avatar="3">
            <img src="https://i.pravatar.cc/50?img=4" alt="Avatar 4" class="profile-img-option" data-avatar="4">
          </div>
          <input type="hidden" id="selectedAvatar" name="selectedAvatar" value="">
          <small style="color: #7f8c8d;">Upload your own image or select an avatar</small>
        </div>
      </div>
      
      <div class="form-group">
        <label>Gender</label>
        <div class="radio-group">
          <label>
            <input type="radio" name="gender" value="Male" checked>
            Male
          </label>
          <label>
            <input type="radio" name="gender" value="Female">
            Female
          </label>
        </div>
      </div>
      
      <div class="form-group">
        <label>Department</label>
        <div class="form-field-wrapper">
          <div class="radio-group">
            <label>
              <input type="radio" name="departmentRadio" value="HR" onchange="toggleCustomDepartment()">
              HR
            </label>
            <label>
              <input type="radio" name="departmentRadio" value="Sales" checked onchange="toggleCustomDepartment()">
              Sales
            </label>
            <label>
              <input type="radio" name="departmentRadio" value="Finance" onchange="toggleCustomDepartment()">
              Finance
            </label>
            <label>
              <input type="radio" name="departmentRadio" value="Engineer" onchange="toggleCustomDepartment()">
              Engineer
            </label>
            <label>
              <input type="radio" name="departmentRadio" value="Others" onchange="toggleCustomDepartment()">
              Others
            </label>
          </div>
          <input 
            type="text" 
            id="customDepartment" 
            name="customDepartment" 
            placeholder="Enter custom department"
            style="display: none;"
          >
          <input type="hidden" id="department" name="department" value="Sales">
        </div>
      </div>
      
      <div class="form-group">
        <label for="salarySelect">Salary</label>
        <div class="form-field-wrapper">
          <select id="salarySelect" name="salarySelect" required onchange="toggleCustomSalary()">
            <option value="">Select Salary</option>
            <option value="10000">â‚¹ 10,000</option>
            <option value="20000">â‚¹ 20,000</option>
            <option value="30000">â‚¹ 30,000</option>
            <option value="40000">â‚¹ 40,000</option>
            <option value="50000">â‚¹ 50,000</option>
            <option value="custom">Custom Amount</option>
          </select>
          <input 
            type="number" 
            id="customSalary" 
            name="customSalary" 
            placeholder="Enter custom salary"
            min="0.01"
            step="0.01"
            style="display: none;"
          >
          <input type="hidden" id="basicSalary" name="basicSalary" value="">
        </div>
      </div>
      
      <div class="form-group">
        <label>Start Date</label>
        <div style="display: flex; gap: 10px; flex: 1;">
          <select name="day" style="flex: 1;">
            <option>Day</option>
            <% for(let i = 1; i <= 31; i++) { %>
              <option value="<%= i %>"><%= i %></option>
            <% } %>
          </select>
          <select name="month" style="flex: 1;">
            <option>Month</option>
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
          <select name="year" style="flex: 1;">
            <option>Year</option>
            <% for(let i = 2024; i >= 2000; i--) { %>
              <option value="<%= i %>"><%= i %></option>
            <% } %>
          </select>
        </div>
      </div>
      
      <div class="form-group">
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes" placeholder="Add any additional notes..."></textarea>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn btn-submit">Submit</button>
        <button type="reset" class="btn btn-reset">Reset</button>
        <a href="/" class="btn btn-cancel">Cancel</a>
      </div>
    </form>
  </div>
</body>
</html>

  <script>
    // Handle avatar selection
    document.querySelectorAll('.profile-img-option').forEach(img => {
      img.addEventListener('click', function() {
        // Remove selection from all avatars
        document.querySelectorAll('.profile-img-option').forEach(i => {
          i.style.borderColor = 'transparent';
        });
        // Highlight selected avatar
        this.style.borderColor = '#9ccc65';
        // Set hidden input value
        document.getElementById('selectedAvatar').value = this.getAttribute('data-avatar');
        // Clear file input if avatar is selected
        document.getElementById('profileImage').value = '';
      });
    });
    
    // Clear avatar selection when file is chosen
    document.getElementById('profileImage').addEventListener('change', function() {
      if (this.files && this.files[0]) {
        document.querySelectorAll('.profile-img-option').forEach(i => {
          i.style.borderColor = 'transparent';
        });
        document.getElementById('selectedAvatar').value = '';
      }
    });
    
    // Toggle custom department input
    function toggleCustomDepartment() {
      const selectedDept = document.querySelector('input[name="departmentRadio"]:checked').value;
      const customDeptInput = document.getElementById('customDepartment');
      const deptHidden = document.getElementById('department');
      
      if (selectedDept === 'Others') {
        customDeptInput.style.display = 'block';
        customDeptInput.required = true;
        deptHidden.value = '';
      } else {
        customDeptInput.style.display = 'none';
        customDeptInput.required = false;
        customDeptInput.value = '';
        deptHidden.value = selectedDept;
      }
    }
    
    // Update hidden department field when custom input changes
    document.getElementById('customDepartment').addEventListener('input', function() {
      document.getElementById('department').value = this.value;
    });
    
    // Toggle custom salary input
    function toggleCustomSalary() {
      const selectedSalary = document.getElementById('salarySelect').value;
      const customSalaryInput = document.getElementById('customSalary');
      const salaryHidden = document.getElementById('basicSalary');
      
      if (selectedSalary === 'custom') {
        customSalaryInput.style.display = 'block';
        customSalaryInput.required = true;
        salaryHidden.value = '';
      } else {
        customSalaryInput.style.display = 'none';
        customSalaryInput.required = false;
        customSalaryInput.value = '';
        salaryHidden.value = selectedSalary;
      }
    }
    
    // Update hidden salary field when custom input changes
    document.getElementById('customSalary').addEventListener('input', function() {
      document.getElementById('basicSalary').value = this.value;
    });
    
    // Initialize department value on page load
    toggleCustomDepartment();
  </script>
